(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a553adde"],{"1b54":function(t,a,e){},a07e:function(t,a,e){},a699:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-container",{staticClass:"login-page",attrs:{fluid:""}},[e("b-row",{staticClass:"rowPerfil"},[e("b-col",[t.show?e("b-form",{staticClass:"formp"},[e("div",{staticClass:"adicionarPlanta"},[t._v("Adicionar Planta")]),e("div",{staticClass:"divs"},[t._v("Imagem")]),e("input",{ref:"file",attrs:{type:"file"},on:{change:t.uploadFile}}),e("div",{staticClass:"divs"},[t._v("Descrição")]),e("b-form-group",{attrs:{id:"input-group-2"}},[e("b-form-input",{ref:"desc",attrs:{id:"input-2"}})],1),e("hr"),e("b-button",{on:{click:t.submitFile}},[t._v("Adicionar imagem")]),e("div",{staticClass:"divs"},[t._v("Imagens")]),e("input",{ref:"file",attrs:{type:"file"},on:{change:t.uploadFiles}}),e("div",{staticClass:"divs"},[t._v("Tipo Planta")]),e("b-form-group",{attrs:{id:"input-group-2"}},[e("b-form-input",{attrs:{id:"input-2",required:""},model:{value:t.form.tipo_planta,callback:function(a){t.$set(t.form,"tipo_planta",a)},expression:"form.tipo_planta"}})],1),e("div",{staticClass:"divs"},[t._v("Preço:")]),e("b-form-group",{attrs:{id:"input-group-2"}},[e("b-form-input",{attrs:{id:"input-2",required:""},model:{value:t.form.preco,callback:function(a){t.$set(t.form,"preco",a)},expression:"form.preco"}})],1),e("div",{staticClass:"divs"},[t._v("Nome:")]),e("b-form-group",{attrs:{id:"input-group-2"}},[e("b-form-input",{attrs:{id:"input-2",required:""},model:{value:t.form.nome,callback:function(a){t.$set(t.form,"nome",a)},expression:"form.nome"}})],1),e("div",{staticClass:"divs"},[t._v("Descrição:")]),e("b-form-group",{attrs:{id:"input-group-2"}},[e("b-form-input",{attrs:{id:"input-2",required:""},model:{value:t.form.desc,callback:function(a){t.$set(t.form,"desc",a)},expression:"form.desc"}})],1),e("b-button",{staticClass:"btnperfil",attrs:{type:"submit"},on:{click:function(a){return a.preventDefault(),t.submitFiles.apply(null,arguments)}}},[t._v("Adicionar Planta")])],1):t._e()],1),e("b-col",[e("div",{staticClass:"plantas"},[e("span",[t._v("Plantas")]),t._l(t.plantas,(function(t){return e("PlantaComp",{key:t.id,attrs:{planta:t}})}))],2)])],1)],1)},s=[],r=(e("14d9"),e("2f62")),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("b-card",{staticClass:"titlep mb-1",staticStyle:{height:"450px",width:"850px"},attrs:{"img-alt":"Image","img-top":"",tag:"article"}},[e("div",{staticClass:"titulo5"},[t._v(t._s(t.planta.nome)+" - ID: "+t._s(t.planta.id))]),e("div",{staticClass:"buttons"},[e("b-button",{staticClass:"btn1",attrs:{to:t.getPlantaUrl(t.planta.id),variant:"primary"}},[t._v("Ir para a planta")]),e("b-button",{staticClass:"btn2",on:{click:t.deletarPlanta}},[e("b-icon",{staticClass:"b-0",attrs:{icon:"trash"}}),t._v(" Excluir >")],1),e("b-button",{staticClass:"btn3",on:{click:function(a){return a.preventDefault(),t.submitFile.apply(null,arguments)}}},[t._v(" Alterar Planta")])],1),e("span"),t._v(" "),e("span"),e("div",{staticClass:"formulario"},[e("b-form",{staticClass:"formularioAlterar"},[e("div",{staticClass:"tipoPlanta"},[t._v("Tipo Planta")]),e("b-form-group",{attrs:{id:"input-group-2"}},[e("b-form-input",{attrs:{id:"input-2",required:""},model:{value:t.formAlterar.tipo_planta,callback:function(a){t.$set(t.formAlterar,"tipo_planta",a)},expression:"formAlterar.tipo_planta"}})],1),e("div",[t._v("Preço:")]),e("b-form-group",{attrs:{id:"input-group-2"}},[e("b-form-input",{attrs:{id:"input-2",required:""},model:{value:t.formAlterar.preco,callback:function(a){t.$set(t.formAlterar,"preco",a)},expression:"formAlterar.preco"}})],1),e("div",[t._v("Nome:")]),e("b-form-group",{attrs:{id:"input-group-2"}},[e("b-form-input",{attrs:{id:"input-2",required:""},model:{value:t.formAlterar.nome,callback:function(a){t.$set(t.formAlterar,"nome",a)},expression:"formAlterar.nome"}})],1),e("br"),e("div",[t._v("Descrição:")]),e("b-form-group",{attrs:{id:"input-group-2"}},[e("b-form-input",{attrs:{id:"input-2",required:""},model:{value:t.formAlterar.desc,callback:function(a){t.$set(t.formAlterar,"desc",a)},expression:"formAlterar.desc"}})],1),e("br"),e("div",[t._v("Imagem:")]),e("input",{ref:"file",attrs:{type:"file"},on:{change:t.uploadFile}}),e("div",[t._v("Comentarios:")]),t._l(t.planta.comentarios,(function(a){return e("div",{key:a.id,staticClass:"Respostas"},[e("h4",[t._v(t._s(a.usuario)+" : "+t._s(a.texto))])])}))],2)],1)])},n=[],l=e("bc3a"),p=e.n(l),m={props:["planta"],data(){return{formAlterar:{tipo_planta:"",preco:"",nome:"",desc:"",imagem_attachment_key:"",comentarios:""},imagem:{},imagens:[]}},async created(){this.getImagens(),this.getPlanta()},methods:{async deletarPlanta(){try{await this.$delete(`/plantas/${this.planta.id}/`,this.planta),alert("Planta removida com sucesso!"),this.$router.push({name:"Home"})}catch{alert("Erro")}},async alteraPlanta(){try{this.formAlterar.planta=this.planta.id,await this.$patch(`/plantas/${this.planta.id}/`,this.formAlterar),alert("Planta editada com sucesso")}catch{alert("Erro")}},async getComentarios(){this.comentarios=await this.$get("comentarios/")},getPlantaUrl(t){return"/produto/"+t},async getImagens(){this.imagens=await this.$get("api/media/imagesUpload/")},uploadFile(){this.Images=this.$refs.file.files[0]},async submitFile(){const t=new FormData;t.append("file",this.Images);const a={"Content-Type":"multipart/form-data"},{data:e}=await p.a.post("http://jaummonster.pythonanywhere.com/api/media/imagesUpload/",t,{headers:a});this.formAlterar.imagem_attachment_key=e.attachment_key,await p.a.put(`http:/jaummonster.pythonanywhere.com/plantas/${this.planta.id}/`,this.formAlterar)},async getPlanta(){this.formAlterar.nome=this.planta.nome,this.formAlterar.preco=this.planta.preco,this.formAlterar.tipo_planta=this.planta.tipo_planta,this.formAlterar.desc=this.planta.desc,this.formAlterar.comentarios=this.planta.comentarios,await this.$get(`plantas/${this.planta.id}/`,this.formAlterar)},async deleteComentarios(){try{await this.$delete(`/comentarios/${this.comentarios.id}/`,this.planta),alert("Comentario removido com sucesso!")}catch{alert("Erro")}},computed:{...Object(r["c"])("auth",["loggedIn","user","id"])}}},c=m,u=(e("db7a"),e("2877")),d=Object(u["a"])(c,o,n,!1,null,null,null),f=d.exports,h={name:"planta",components:{PlantaComp:f},data(){return{form:{tipo_planta:"",preco:"",nome:"",desc:"",imagem_attachment_key:"",comentarios:""},imagem:{},show:!0,planta:{},plantas:[]}},async created(){await this.getPlanta(),await this.getImagens()},methods:{async getPlanta(){this.plantas=await this.$get("plantas/")},async getImagens(){this.imagens=await this.$get("api/media/imagesUpload/")},async adicionarPlanta(){try{await this.$post("/plantas/",this.form),alert("Planta adicionada com sucesso!")}catch{alert("Erro")}},uploadFile(){this.Images=this.$refs.file.files[0],this.Desc=this.$refs.desc.Images},submitFile(){const t=new FormData;t.append("file",this.Images),t.append("description",this.Desc);const a={"Content-Type":"multipart/form-data"};p.a.post("http://jaummonster.pythonanywhere.com/api/media/imagesUpload/",t,{headers:a}).then(t=>{t.data.files,t.status})},uploadFiles(){this.Images=this.$refs.file.files[0]},async submitFiles(){const t=new FormData;t.append("file",this.Images);const a={"Content-Type":"multipart/form-data"},{data:e}=await p.a.post("https://jaummonster.pythonanywhere.com/api/media/imagesUpload/",t,{headers:a});this.form.imagem_attachment_key=e.attachment_key,await p.a.post("https://jaummonster.pythonanywhere.com/plantas/",this.form),alert("Planta adicionada com sucesso!"),this.$router.push({name:"Home"})},computed:{...Object(r["c"])("auth",["loggedIn","user","id"])}}},g=h,b=(e("f9d9"),Object(u["a"])(g,i,s,!1,null,null,null));a["default"]=b.exports},db7a:function(t,a,e){"use strict";e("a07e")},f9d9:function(t,a,e){"use strict";e("1b54")}}]);
//# sourceMappingURL=chunk-a553adde.c8f9b99d.js.map